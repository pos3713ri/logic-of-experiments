<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>1&nbsp; ATE – The Logic of Experiments</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../ch/ate-hat.html" rel="next">
<link href="../index.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-2db5a64a0f9238d29502e24e892d8c52.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../_styles.css">
</head>

<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../ch/ate.html"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">ATE</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">The Logic of Experiments</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ch/ate.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">ATE</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ch/ate-hat.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Estimating the ATE</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ch/var.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">The Variance of <span class="math inline">\(\widehat{\text{ATE}}\)</span></span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ch/var-est.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Estimating the Variance</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../appendices/var-proof.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Appendix A: Proof of the Variance Formula</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#potential-outcomes" id="toc-potential-outcomes" class="nav-link active" data-scroll-target="#potential-outcomes"><span class="header-section-number">1.1</span> Potential Outcomes</a></li>
  <li><a href="#the-individual-level-treatment-effect" id="toc-the-individual-level-treatment-effect" class="nav-link" data-scroll-target="#the-individual-level-treatment-effect"><span class="header-section-number">1.2</span> The Individual-Level Treatment Effect</a></li>
  <li><a href="#the-average-treatment-effect" id="toc-the-average-treatment-effect" class="nav-link" data-scroll-target="#the-average-treatment-effect"><span class="header-section-number">1.3</span> The Average Treatment Effect</a></li>
  <li><a href="#special-cases" id="toc-special-cases" class="nav-link" data-scroll-target="#special-cases"><span class="header-section-number">1.4</span> Special Cases</a>
  <ul class="collapse">
  <li><a href="#the-sharp-null-hypothesis" id="toc-the-sharp-null-hypothesis" class="nav-link" data-scroll-target="#the-sharp-null-hypothesis"><span class="header-section-number">1.4.1</span> The Sharp Null Hypothesis</a></li>
  <li><a href="#constant-treatment-effects" id="toc-constant-treatment-effects" class="nav-link" data-scroll-target="#constant-treatment-effects"><span class="header-section-number">1.4.2</span> Constant Treatment Effects</a></li>
  </ul></li>
  <li><a href="#rasinskis-question-wording-experiment" id="toc-rasinskis-question-wording-experiment" class="nav-link" data-scroll-target="#rasinskis-question-wording-experiment"><span class="header-section-number">1.5</span> Rasinski’s Question-Wording Experiment</a>
  <ul class="collapse">
  <li><a href="#hypothetical-potential-outcomes" id="toc-hypothetical-potential-outcomes" class="nav-link" data-scroll-target="#hypothetical-potential-outcomes"><span class="header-section-number">1.5.1</span> Hypothetical Potential Outcomes</a></li>
  <li><a href="#computing-the-ate" id="toc-computing-the-ate" class="nav-link" data-scroll-target="#computing-the-ate"><span class="header-section-number">1.5.2</span> Computing the ATE</a></li>
  </ul></li>
  <li><a href="#key-terms" id="toc-key-terms" class="nav-link" data-scroll-target="#key-terms"><span class="header-section-number">1.6</span> Key Terms</a></li>
  <li><a href="#exercises" id="toc-exercises" class="nav-link" data-scroll-target="#exercises"><span class="header-section-number">1.7</span> Exercises</a>
  <ul class="collapse">
  <li><a href="#conceptual-understanding" id="toc-conceptual-understanding" class="nav-link" data-scroll-target="#conceptual-understanding"><span class="header-section-number">1.7.1</span> Conceptual Understanding</a></li>
  <li><a href="#computational-practice" id="toc-computational-practice" class="nav-link" data-scroll-target="#computational-practice"><span class="header-section-number">1.7.2</span> Computational Practice</a></li>
  <li><a href="#application-to-rasinskis-experiment" id="toc-application-to-rasinskis-experiment" class="nav-link" data-scroll-target="#application-to-rasinskis-experiment"><span class="header-section-number">1.7.3</span> Application to Rasinski’s Experiment</a></li>
  <li><a href="#critical-thinking" id="toc-critical-thinking" class="nav-link" data-scroll-target="#critical-thinking"><span class="header-section-number">1.7.4</span> Critical Thinking</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">ATE</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>In this chapter, we define the <strong>average treatment effect</strong> or the <strong>ATE</strong>. This is the key quantity of interest that we want to estimate with an experiment. But to define (and understand) the ATE, we need to define several preliminary concepts.</p>
<section id="potential-outcomes" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="potential-outcomes"><span class="header-section-number">1.1</span> Potential Outcomes</h2>
<p>The fundamental problem of causal inference is that we can never observe what <em>would have happened</em> to the same individual if we had instead assigned them to a different condition. We can observe the outcome under—at most—one condition.</p>
<p>To formalize this, we use the <strong>potential outcomes framework</strong>.</p>
<p>For each individual <span class="math inline">\(i\)</span> in our study, we define two potential outcomes:</p>
<ul>
<li><span class="math inline">\(Y_i(1)\)</span>: the outcome individual <span class="math inline">\(i\)</span> <em>would</em> experience if assigned to treatment (<span class="math inline">\(D_i = 1\)</span>)</li>
<li><span class="math inline">\(Y_i(0)\)</span>: the outcome individual <span class="math inline">\(i\)</span> <em>would</em> experience if assigned to control (<span class="math inline">\(D_i = 0\)</span>)</li>
</ul>
<p>These are called “potential” outcomes because we can observe no more than one of them for any given individual. If individual <span class="math inline">\(i\)</span> receives treatment, we observe <span class="math inline">\(Y_i(1)\)</span> but not <span class="math inline">\(Y_i(0)\)</span>. If individual <span class="math inline">\(i\)</span> is in control, we observe <span class="math inline">\(Y_i(0)\)</span> but not <span class="math inline">\(Y_i(1)\)</span>.</p>
<p>The unobserved potential outcome for each individual is called the <strong>counterfactual</strong>. The counterfactual represents what <em>would have</em> happened in the hypothetical scenario in which the individual was assigned to a <em>different condition</em>.</p>
<p>To make this concrete, consider a hypothetical experiment with 10 respondents. The table below shows both potential outcomes for each respondent—something we could never actually observe in reality, but which helps us understand the framework:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Respondent</th>
<th><span class="math inline">\(Y_i(0)\)</span></th>
<th><span class="math inline">\(Y_i(1)\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>4</td>
<td>7</td>
</tr>
<tr class="even">
<td>2</td>
<td>6</td>
<td>5</td>
</tr>
<tr class="odd">
<td>3</td>
<td>5</td>
<td>5</td>
</tr>
<tr class="even">
<td>4</td>
<td>3</td>
<td>9</td>
</tr>
<tr class="odd">
<td>5</td>
<td>7</td>
<td>10</td>
</tr>
<tr class="even">
<td>6</td>
<td>5</td>
<td>4</td>
</tr>
<tr class="odd">
<td>7</td>
<td>4</td>
<td>8</td>
</tr>
<tr class="even">
<td>8</td>
<td>6</td>
<td>7</td>
</tr>
<tr class="odd">
<td>9</td>
<td>5</td>
<td>3</td>
</tr>
<tr class="even">
<td>10</td>
<td>4</td>
<td>6</td>
</tr>
</tbody>
</table>
<p>Importantly, though, we cannot observe both potential outcomes. But for now, let’s ignore that difficulty.</p>
</section>
<section id="the-individual-level-treatment-effect" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="the-individual-level-treatment-effect"><span class="header-section-number">1.2</span> The Individual-Level Treatment Effect</h2>
<p>Once we have defined potential outcomes, we can define the <strong>individual-level treatment effect</strong> for individual <span class="math inline">\(i\)</span> as <span class="math inline">\(\tau_i = Y_i(1) - Y_i(0)\)</span>.</p>
<p>This represents the causal effect of treatment for that specific individual. It’s simply the difference between what would happen if they were assigned to treatment versus what would happen if they were assigned to control.</p>
<p>If we knew all the potential outcomes, then we could compute the individual-level treatment effect for each respondent.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Respondent</th>
<th><span class="math inline">\(Y_i(0)\)</span></th>
<th><span class="math inline">\(Y_i(1)\)</span></th>
<th><span class="math inline">\(\tau_i\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>4</td>
<td>7</td>
<td>7 - 4 = 3</td>
</tr>
<tr class="even">
<td>2</td>
<td>6</td>
<td>5</td>
<td>5 - 6 = -1</td>
</tr>
<tr class="odd">
<td>3</td>
<td>5</td>
<td>5</td>
<td>5 - 5 = 0</td>
</tr>
<tr class="even">
<td>4</td>
<td>3</td>
<td>9</td>
<td>9 - 3 = 6</td>
</tr>
<tr class="odd">
<td>5</td>
<td>7</td>
<td>10</td>
<td>10 - 7 = 3</td>
</tr>
<tr class="even">
<td>6</td>
<td>5</td>
<td>4</td>
<td>4 - 5 = -1</td>
</tr>
<tr class="odd">
<td>7</td>
<td>4</td>
<td>8</td>
<td>8 - 4 = 4</td>
</tr>
<tr class="even">
<td>8</td>
<td>6</td>
<td>7</td>
<td>7 - 6 = 1</td>
</tr>
<tr class="odd">
<td>9</td>
<td>5</td>
<td>3</td>
<td>3 - 5 = -2</td>
</tr>
<tr class="even">
<td>10</td>
<td>4</td>
<td>6</td>
<td>6 - 4 = 2</td>
</tr>
</tbody>
</table>
<p>Again, there’s a fundamental problem: we can never observe <span class="math inline">\(\tau_i\)</span> directly because we never observe both potential outcomes for the same individual. This is sometimes called the <strong>fundamental problem of causal inference</strong>. We observe either <span class="math inline">\(Y_i(1)\)</span> or <span class="math inline">\(Y_i(0)\)</span>, but never both. But again, let’s continue to ignore this pesky problem.</p>
</section>
<section id="the-average-treatment-effect" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="the-average-treatment-effect"><span class="header-section-number">1.3</span> The Average Treatment Effect</h2>
<p>We already know that we cannot observe the individual-level treatment effects. So instead, let’s cleverly <em>sidestep</em> the problem. Let’s define the <strong>average treatment effect</strong> or <strong>ATE</strong>, defined as</p>
<p><span class="math display">\[
\begin{align}
\text{ATE} &amp;= \frac{1}{N}\sum_{i=1}^{N} [Y_i(1) - Y_i(0)] \\
&amp;= \frac{1}{N}\sum_{i=1}^{N} Y_i(1) - \frac{1}{N}\sum_{i=1}^{N} Y_i(0) \\
&amp;= \text{avg} \left( Y_i(1) \right) - \text{avg} \left( Y_i(0) \right) \\
&amp;= \text{avg. of ALL p.o. under treatment } - \text{avg. of ALL p.o. under control}
\end{align}
\]</span></p>
<p>The ATE represents the average causal effect of treatment across all individuals in the population. It tells us: on average, how much does treatment change outcomes?</p>
<p>Here’s another way to think about. Suppose we assigned <em>everyone</em> to treatment and computed the average outcome. Suppose we also assigned <em>everyone</em> to control and computed the average outcome. (We can’t assign <em>everyone</em> to treatment <em>and everyone</em> to control, but suppose we could). The ATE is the difference between this two average.</p>
<p>Again, we cannot observe the ATE, but it turns out that this quantity can be estimated. In later sections, we’ll show how we can use randomized experiments to estimate the ATE. But for now, let’s focus on the meaning of the concept.</p>
<p>To make this concrete, we can compute the ATE for the potential outcomes above.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Respondent</th>
<th><span class="math inline">\(Y_i(0)\)</span></th>
<th><span class="math inline">\(Y_i(1)\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>4</td>
<td>7</td>
</tr>
<tr class="even">
<td>2</td>
<td>6</td>
<td>5</td>
</tr>
<tr class="odd">
<td>3</td>
<td>5</td>
<td>5</td>
</tr>
<tr class="even">
<td>4</td>
<td>3</td>
<td>9</td>
</tr>
<tr class="odd">
<td>5</td>
<td>7</td>
<td>10</td>
</tr>
<tr class="even">
<td>6</td>
<td>5</td>
<td>4</td>
</tr>
<tr class="odd">
<td>7</td>
<td>4</td>
<td>8</td>
</tr>
<tr class="even">
<td>8</td>
<td>6</td>
<td>7</td>
</tr>
<tr class="odd">
<td>9</td>
<td>5</td>
<td>3</td>
</tr>
<tr class="even">
<td>10</td>
<td>4</td>
<td>6</td>
</tr>
</tbody>
</table>
<p>Using this table, we can compute the ATE by finding the average of all potential outcomes under control and the average of all potential outcomes under treatment:</p>
<p><span class="math display">\[
\begin{align}
\text{ATE} &amp;= \frac{1}{N}\sum_{i=1}^{N} Y_i(1) - \frac{1}{N}\sum_{i=1}^{N} Y_i(0) \\
&amp;= \frac{1}{10}(7 + 5 + 5 + 9 + 10 + 4 + 8 + 7 + 3 + 6) - \frac{1}{10}(4 + 6 + 5 + 3 + 7 + 5 + 4 + 6 + 5 + 4) \\
&amp;= \frac{64}{10} - \frac{49}{10} \\
&amp;= 6.4 - 4.9 \\
&amp;= 1.5
\end{align}
\]</span> The ATE is 1.5, meaning that <em>on average</em>, treatment increases outcomes by 1.5 units. (We could average the <span class="math inline">\(\tau_i\)</span> in the table above to obtain the identical value.)</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>When we write about the “average treatment effect,” it should be understood as something very specific. It should be understood as the difference between two quantities: the hypothetical difference between (1) the average value of the outcome if we assigned <em>everyone</em> to treatment and (2) the average value of the outcome if we assigned <em>everyone</em> to control.</p>
</div>
</div>
</section>
<section id="special-cases" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="special-cases"><span class="header-section-number">1.4</span> Special Cases</h2>
<section id="the-sharp-null-hypothesis" class="level3" data-number="1.4.1">
<h3 data-number="1.4.1" class="anchored" data-anchor-id="the-sharp-null-hypothesis"><span class="header-section-number">1.4.1</span> The Sharp Null Hypothesis</h3>
<p>The <strong>sharp null hypothesis</strong> is a particularly strong claim about individual treatment effects. The sharp null hypothesis states that</p>
<p><span class="math display">\[\text{sharp null hypothesis}: Y_i(1) = Y_i(0) \text{ for all } i.\]</span></p>
<p>This hypothesis states that treatment has <em>exactly zero effect</em> for every single individual in the study. That is, for each individual in the experiment, the outcome is identical regardless of whether it is assigned to treatment or control. Under the sharp null, the treatment effect <span class="math inline">\(\tau_i = 0\)</span> for all <span class="math inline">\(i\)</span>.</p>
<p>This hypothesis is helpful because it completely specifies all potential outcomes. If we assume the sharp null hypothesis holds, then we can compute the counterfactual outcome from the observed outcome.</p>
<ul>
<li>Suppose we observe <span class="math inline">\(Y_i(0)\)</span> for a control individual, we know that <span class="math inline">\(Y_i(1) = Y_i(0)\)</span>.</li>
<li>Similarly, suppose we observe <span class="math inline">\(Y_i(1)\)</span> for a treated individual, we know that <span class="math inline">\(Y_i(0) = Y_i(1)\)</span>.</li>
</ul>
<p>While we never know whether the sharp null hypothesis holds—and it seems implausible that it <em>ever</em> would hold—it can sometimes be convenient to check what would happen <em>if it did hold</em>.</p>
<p>The table below shows a set of potential outcomes where the sharp null holds.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Respondent</th>
<th><span class="math inline">\(Y_i(0)\)</span></th>
<th><span class="math inline">\(Y_i(1)\)</span></th>
<th><span class="math inline">\(\tau_i\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>4</td>
<td>4</td>
<td>4 - 4 = 0</td>
</tr>
<tr class="even">
<td>2</td>
<td>6</td>
<td>6</td>
<td>6 - 6 = 0</td>
</tr>
<tr class="odd">
<td>3</td>
<td>5</td>
<td>5</td>
<td>5 - 5 = 0</td>
</tr>
<tr class="even">
<td>4</td>
<td>3</td>
<td>3</td>
<td>3 - 3 = 0</td>
</tr>
<tr class="odd">
<td>5</td>
<td>7</td>
<td>7</td>
<td>7 - 7 = 0</td>
</tr>
<tr class="even">
<td>6</td>
<td>5</td>
<td>5</td>
<td>5 - 5 = 0</td>
</tr>
<tr class="odd">
<td>7</td>
<td>4</td>
<td>4</td>
<td>4 - 4 = 0</td>
</tr>
<tr class="even">
<td>8</td>
<td>6</td>
<td>6</td>
<td>6 - 6 = 0</td>
</tr>
<tr class="odd">
<td>9</td>
<td>5</td>
<td>5</td>
<td>5 - 5 = 0</td>
</tr>
<tr class="even">
<td>10</td>
<td>4</td>
<td>4</td>
<td>4 - 4 = 0</td>
</tr>
</tbody>
</table>
<p>Under the sharp null hypothesis, <span class="math inline">\(Y_i(1) = Y_i(0)\)</span> for all individuals <span class="math inline">\(i\)</span>, which means <span class="math inline">\(\tau_i = 0\)</span> for all individuals. We can verify this by computing the ATE:</p>
<p><span class="math display">\[
\begin{align}
\text{ATE} &amp;= \frac{1}{N}\sum_{i=1}^{N} Y_i(1) - \frac{1}{N}\sum_{i=1}^{N} Y_i(0) \\
&amp;= \frac{1}{10}(4 + 6 + 5 + 3 + 7 + 5 + 4 + 6 + 5 + 4) - \frac{1}{10}(4 + 6 + 5 + 3 + 7 + 5 + 4 + 6 + 5 + 4) \\
&amp;= \frac{49}{10} - \frac{49}{10} \\
&amp;= 4.9 - 4.9 \\
&amp;= 0
\end{align}
\]</span></p>
<p>The ATE is exactly 0. This follows from the fact that all of the individual-level effects are exactly zero as well.</p>
</section>
<section id="constant-treatment-effects" class="level3" data-number="1.4.2">
<h3 data-number="1.4.2" class="anchored" data-anchor-id="constant-treatment-effects"><span class="header-section-number">1.4.2</span> Constant Treatment Effects</h3>
<p>Another implausible but sometimes-helpful hypothesis is the <strong>constant treatment effects</strong> assumption that</p>
<p><span class="math display">\[\tau_i = \tau \text{ for all individuals } i\]</span></p>
<p>This assumes that while the individual-level treatment effect may be different from zero, that effect is <em>exactly the same</em> for every individual so that <span class="math display">\[Y_i(1) - Y_i(0) = \tau \text{ for all } i\]</span>. Here, <span class="math inline">\(\tau\)</span> is a fixed number like 2 or -4.2 that is the same for all the individuals.</p>
<p>As before, we never know whether individual-level treatment effects are constant—and it seems implausible they <em>ever</em> would be. But it can sometimes be convenient to check what would happen <em>if they were constant</em>.</p>
<p>Similar to the sharp null hypothesis, the constant effects hypothesis is helpful because it completely specifies all potential outcomes. It allows us to compute the counterfactual outcome from the observed outcome.</p>
<ul>
<li>Suppose we observe <span class="math inline">\(Y_i(0)\)</span> for a control individual, we know that <span class="math inline">\(Y_i(1)\)</span> is 2 points larger than that so that <span class="math inline">\(Y_i(1) = Y_i(0) + 2\)</span>.</li>
<li>Similarly, suppose we observe <span class="math inline">\(Y_i(1)\)</span> for a treated individual, we know that <span class="math inline">\(Y_i(0)\)</span> is 2 points less than that so that <span class="math inline">\(Y_i(0) = Y_i(1) - 2\)</span>.</li>
</ul>
<p>The table below shows a set of potential outcomes where treatment effects are constant at <span class="math inline">\(\tau = 2\)</span> for all individuals.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Respondent</th>
<th><span class="math inline">\(Y_i(0)\)</span></th>
<th><span class="math inline">\(Y_i(1)\)</span></th>
<th><span class="math inline">\(\tau_i\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>4</td>
<td>6</td>
<td>6 - 4 = 2</td>
</tr>
<tr class="even">
<td>2</td>
<td>6</td>
<td>8</td>
<td>8 - 6 = 2</td>
</tr>
<tr class="odd">
<td>3</td>
<td>5</td>
<td>7</td>
<td>7 - 5 = 2</td>
</tr>
<tr class="even">
<td>4</td>
<td>3</td>
<td>5</td>
<td>5 - 3 = 2</td>
</tr>
<tr class="odd">
<td>5</td>
<td>7</td>
<td>9</td>
<td>9 - 7 = 2</td>
</tr>
<tr class="even">
<td>6</td>
<td>5</td>
<td>7</td>
<td>7 - 5 = 2</td>
</tr>
<tr class="odd">
<td>7</td>
<td>4</td>
<td>6</td>
<td>6 - 4 = 2</td>
</tr>
<tr class="even">
<td>8</td>
<td>6</td>
<td>8</td>
<td>8 - 6 = 2</td>
</tr>
<tr class="odd">
<td>9</td>
<td>5</td>
<td>7</td>
<td>7 - 5 = 2</td>
</tr>
<tr class="even">
<td>10</td>
<td>4</td>
<td>6</td>
<td>6 - 4 = 2</td>
</tr>
</tbody>
</table>
<p><span class="math display">\[
\begin{align}
\text{ATE} &amp;= \frac{1}{N}\sum_{i=1}^{N} Y_i(1) - \frac{1}{N}\sum_{i=1}^{N} Y_i(0) \\
&amp;= \frac{1}{10}(6 + 8 + 7 + 5 + 9 + 7 + 6 + 8 + 7 + 6) - \frac{1}{10}(4 + 6 + 5 + 3 + 7 + 5 + 4 + 6 + 5 + 4) \\
&amp;= \frac{69}{10} - \frac{49}{10} \\
&amp;= 6.9 - 4.9 \\
&amp;= 2
\end{align}
\]</span></p>
<p>The ATE is exactly 2. This follows from the fact that all of the individual-level effects are exactly 2 as well. When treatment effects are constant, the ATE perfectly captures the treatment effect for every individual.</p>
</section>
</section>
<section id="rasinskis-question-wording-experiment" class="level2 page-columns page-full" data-number="1.5">
<h2 data-number="1.5" class="anchored" data-anchor-id="rasinskis-question-wording-experiment"><span class="header-section-number">1.5</span> Rasinski’s Question-Wording Experiment</h2>
<p>In a famous survey experiment, <span class="citation" data-cites="rasinski1989">Rasinski (<a href="#ref-rasinski1989" role="doc-biblioref">1989</a>)</span> was curious about how question wording affects public support for government spending.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<div class="no-row-height column-margin column-container"><div id="ref-rasinski1989" class="csl-entry" role="listitem">
Rasinski, Kenneth A. 1989. <span>“The Effect of Question Wording on Public Support for Government Spending.”</span> <em>Public Opinion Quarterly</em> 53 (3): 388–94.
</div><div id="fn1"><p><sup>1</sup>&nbsp;Respondents were randomly assigned to one of two conditions that asked about spending on programs for low-income individuals, but used different labels to describe these programs. The experiment was conducted across three years (1984, 1985, and 1986) and consistently found that far more respondents said the government was spending “too little” when the program was described as “assistance to the poor” (around 63-65%) compared to when it was described as “welfare” (around 20-25%). This represents a dramatic difference of approximately 40 percentage points due solely to the choice of label used to describe the same underlying government program.</p></div></div><p>Respondents could be assigned to one of two conditions: treatment or control. The two conditions featured an identical question stem, but varied in how they describe the spending.</p>
<p><strong>Question stem</strong> (identical for both conditions): <em>“Are we spending too much, too little, or about the right amount on…”</em></p>
<p><strong>Treatment condition</strong>: <em>“…assistance to the poor?”</em></p>
<p><strong>Control condition</strong>: <em>“…welfare?”</em></p>
<p><strong>Response options</strong>:</p>
<ul>
<li>Too little = 1</li>
<li>About right = 2</li>
<li>Too much = 3</li>
</ul>
<p>Thus each respondent had two potential outcomes:</p>
<ul>
<li><span class="math inline">\(Y_i(1)\)</span>: the response respondent <span class="math inline">\(i\)</span> <em>would</em> give if assigned to the treatment condition (“assistance to the poor”)</li>
<li><span class="math inline">\(Y_i(0)\)</span>: the response respondent <span class="math inline">\(i\)</span> <em>would</em> give if assigned to the control condition (“welfare”)</li>
</ul>
<p>As before, we can never observe both potential outcomes for the same respondent. We can observe their response if the program is described as “assistance to the poor” or as “welfare”, but <em>not both</em>.</p>
<section id="hypothetical-potential-outcomes" class="level3" data-number="1.5.1">
<h3 data-number="1.5.1" class="anchored" data-anchor-id="hypothetical-potential-outcomes"><span class="header-section-number">1.5.1</span> Hypothetical Potential Outcomes</h3>
<p>To illustrate the concepts, suppose we could magically observe both potential outcomes for a sample of 10 respondents. The table below shows what each respondent would answer under each condition:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 19%">
<col style="width: 30%">
<col style="width: 34%">
<col style="width: 15%">
</colgroup>
<thead>
<tr class="header">
<th>Respondent</th>
<th><span class="math inline">\(Y_i(0)\)</span> (“welfare”)</th>
<th><span class="math inline">\(Y_i(1)\)</span> (“assistance”)</th>
<th><span class="math inline">\(\tau_i\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>3 (Too much)</td>
<td>1 (Too little)</td>
<td>1 - 3 = -2</td>
</tr>
<tr class="even">
<td>2</td>
<td>3 (Too much)</td>
<td>2 (About right)</td>
<td>2 - 3 = -1</td>
</tr>
<tr class="odd">
<td>3</td>
<td>2 (About right)</td>
<td>1 (Too little)</td>
<td>1 - 2 = -1</td>
</tr>
<tr class="even">
<td>4</td>
<td>3 (Too much)</td>
<td>1 (Too little)</td>
<td>1 - 3 = -2</td>
</tr>
<tr class="odd">
<td>5</td>
<td>2 (About right)</td>
<td>1 (Too little)</td>
<td>1 - 2 = -1</td>
</tr>
<tr class="even">
<td>6</td>
<td>3 (Too much)</td>
<td>2 (About right)</td>
<td>2 - 3 = -1</td>
</tr>
<tr class="odd">
<td>7</td>
<td>2 (About right)</td>
<td>1 (Too little)</td>
<td>1 - 2 = -1</td>
</tr>
<tr class="even">
<td>8</td>
<td>3 (Too much)</td>
<td>1 (Too little)</td>
<td>1 - 3 = -2</td>
</tr>
<tr class="odd">
<td>9</td>
<td>2 (About right)</td>
<td>2 (About right)</td>
<td>2 - 2 = 0</td>
</tr>
<tr class="even">
<td>10</td>
<td>3 (Too much)</td>
<td>1 (Too little)</td>
<td>1 - 3 = -2</td>
</tr>
</tbody>
</table>
<p>Notice that for most respondents, the treatment effect <span class="math inline">\(\tau_i\)</span> is negative. This means that asking about “assistance to the poor” produces <em>lower</em> numeric responses than asking about “welfare.” In this case, lower numbers indicate more support for spending (“too little” = 1), these negative treatment effects actually represent <em>increased support</em> for spending when using the “assistance to the poor” wording.</p>
</section>
<section id="computing-the-ate" class="level3" data-number="1.5.2">
<h3 data-number="1.5.2" class="anchored" data-anchor-id="computing-the-ate"><span class="header-section-number">1.5.2</span> Computing the ATE</h3>
<p>We can compute the ATE for this hypothetical data:</p>
<p><span class="math display">\[
\begin{align}
\text{ATE} &amp;= \frac{1}{N}\sum_{i=1}^{N} Y_i(1) - \frac{1}{N}\sum_{i=1}^{N} Y_i(0) \\
&amp;= \frac{1}{10}(1 + 2 + 1 + 1 + 1 + 2 + 1 + 1 + 2 + 1) - \frac{1}{10}(3 + 3 + 2 + 3 + 2 + 3 + 2 + 3 + 2 + 3) \\
&amp;= \frac{13}{10} - \frac{26}{10} \\
&amp;= 1.3 - 2.6 \\
&amp;= -1.3
\end{align}
\]</span></p>
<p>The ATE is -1.3. Since lower values on our 1-2-3 scale indicate more support for spending, this negative ATE means that the “assistance to the poor” wording increases support for spending by an average of 1.3 scale points compared to the “welfare” wording.</p>
</section>
</section>
<section id="key-terms" class="level2" data-number="1.6">
<h2 data-number="1.6" class="anchored" data-anchor-id="key-terms"><span class="header-section-number">1.6</span> Key Terms</h2>
<ul>
<li>Potential outcomes</li>
<li>Potential outcomes framework</li>
<li>Counterfactual</li>
<li>Individual-level treatment effect</li>
<li>Fundamental problem of causal inference</li>
<li>Average treatment effect (ATE)</li>
<li>Sharp null hypothesis</li>
<li>Constant treatment effects</li>
</ul>
</section>
<section id="exercises" class="level2" data-number="1.7">
<h2 data-number="1.7" class="anchored" data-anchor-id="exercises"><span class="header-section-number">1.7</span> Exercises</h2>
<section id="conceptual-understanding" class="level3" data-number="1.7.1">
<h3 data-number="1.7.1" class="anchored" data-anchor-id="conceptual-understanding"><span class="header-section-number">1.7.1</span> Conceptual Understanding</h3>
<ol type="1">
<li><strong>Defining Potential Outcomes.</strong> In your own words, explain what <span class="math inline">\(Y_i(1)\)</span> and <span class="math inline">\(Y_i(0)\)</span> represent in the context of Rasinski’s question-wording experiment. Why can we never observe both potential outcomes for the same respondent?</li>
</ol>
<details>
<summary>
Solution
</summary>
<p>In Rasinski’s question-wording experiment, each respondent has two potential outcomes:</p>
<ul>
<li><p><span class="math inline">\(Y_i(1)\)</span> is the response that respondent <span class="math inline">\(i\)</span> <em>would</em> give if asked about spending on “assistance to the poor.” This is the potential outcome under the treatment condition.</p></li>
<li><p><span class="math inline">\(Y_i(0)\)</span> is the response that respondent <span class="math inline">\(i\)</span> <em>would</em> give if asked about spending on “welfare.” This is the potential outcome under the control condition.</p></li>
</ul>
<p>We can never observe both potential outcomes for the same respondent because each respondent can only answer <em>one version</em> of the question. Once respondent <span class="math inline">\(i\)</span> sees the question with “welfare” and gives their answer, we cannot rewind time and show them the “assistance to the poor” version as if they had never seen the first one. At most, we observe one potential outcome per respondent—either <span class="math inline">\(Y_i(1)\)</span> or <span class="math inline">\(Y_i(0)\)</span>, but never both.</p>
<p>This is the fundamental problem of causal inference.</p>
</details>
<ol start="2" type="1">
<li><strong>The Fundamental Problem.</strong> Explain why we call it the “fundamental problem of causal inference.” What makes this problem “fundamental” rather than just “difficult”?</li>
</ol>
<details>
<summary>
Solution
</summary>
<p>We call it the “fundamental” problem of causal inference—rather than just a “difficult” problem—because it cannot be solved, even in principle.</p>
<p>A “difficult” problem is one we might overcome with better technology, more data, or cleverer methods. The fundamental problem is different: it is a logical impossibility. At any given moment, an individual either receives treatment or does not. We cannot observe the same person in two different states of the world at the same time. No amount of resources or ingenuity can change this fact.</p>
<p>This is why we need research designs—like randomized experiments—that allow us to <em>estimate</em> causal effects at the group level, even though we can never directly <em>observe</em> individual-level causal effects.</p>
</details>
<ol start="3" type="1">
<li><strong>ATE Interpretation.</strong> A researcher finds an ATE of 3.2 in an experiment testing the effect of a new study technique on exam scores (measured 0-100). Write two sentences explaining what this means in plain language that a non-statistician could understand.</li>
</ol>
<details>
<summary>
Solution
</summary>
<p>An ATE of 3.2 means that, on average, students who use the new study technique score about 3.2 points higher on the exam compared to what they would have scored without using the technique.</p>
<p>Another way to say this: if we could magically give the study technique to all students and then also observe what would have happened if none of them used it, the average difference between these two scenarios would be 3.2 points.</p>
</details>
<ol start="4" type="1">
<li><strong>Sharp Null vs.&nbsp;Zero ATE.</strong> Is it possible to have an ATE of zero even when the sharp null hypothesis does not hold? Explain your answer and provide an example using a simple table of potential outcomes for 4 individuals.</li>
</ol>
<details>
<summary>
Solution
</summary>
<p>Yes, it is possible to have an ATE of zero even when the sharp null hypothesis does not hold.</p>
<p>The sharp null hypothesis is a strong claim: it requires that <span class="math inline">\(\tau_i = 0\)</span> for <em>every single individual</em>. That is, <span class="math inline">\(Y_i(1) = Y_i(0)\)</span> for all <span class="math inline">\(i\)</span>.</p>
<p>The ATE, on the other hand, is just the <em>average</em> of the individual treatment effects:</p>
<p><span class="math display">\[\text{ATE} = \frac{1}{N} \sum_{i=1}^{N} \tau_i\]</span></p>
<p>If some individuals have positive treatment effects and others have negative treatment effects, these can cancel out, producing an ATE of zero even though the treatment affected every individual.</p>
<p>Here is a concrete example with 4 individuals:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Individual</th>
<th><span class="math inline">\(Y_i(0)\)</span></th>
<th><span class="math inline">\(Y_i(1)\)</span></th>
<th><span class="math inline">\(\tau_i = Y_i(1) - Y_i(0)\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>5</td>
<td>8</td>
<td><span class="math inline">\(8 - 5 = 3\)</span></td>
</tr>
<tr class="even">
<td>2</td>
<td>7</td>
<td>4</td>
<td><span class="math inline">\(4 - 7 = -3\)</span></td>
</tr>
<tr class="odd">
<td>3</td>
<td>6</td>
<td>8</td>
<td><span class="math inline">\(8 - 6 = 2\)</span></td>
</tr>
<tr class="even">
<td>4</td>
<td>8</td>
<td>6</td>
<td><span class="math inline">\(6 - 8 = -2\)</span></td>
</tr>
</tbody>
</table>
<p>Computing the ATE:</p>
<p><span class="math display">\[
\begin{align}
\text{ATE} &amp;= \frac{1}{4} \sum_{i=1}^{4} \tau_i \\
&amp;= \frac{1}{4}(3 + (-3) + 2 + (-2)) \\
&amp;= \frac{0}{4} \\
&amp;= 0
\end{align}
\]</span></p>
<p>The ATE equals zero, but the sharp null does <em>not</em> hold. The treatment affected every single individual—individuals 1 and 3 experienced positive effects of 3 and 2, while individuals 2 and 4 experienced negative effects of -3 and -2. The effects simply cancel out when we average them.</p>
</details>
</section>
<section id="computational-practice" class="level3" data-number="1.7.2">
<h3 data-number="1.7.2" class="anchored" data-anchor-id="computational-practice"><span class="header-section-number">1.7.2</span> Computational Practice</h3>
<ol start="5" type="1">
<li><p><strong>Computing Individual Treatment Effects.</strong> Consider the following potential outcomes for 6 respondents in a hypothetical experiment:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Respondent</th>
<th><span class="math inline">\(Y_i(0)\)</span></th>
<th><span class="math inline">\(Y_i(1)\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>5</td>
<td>8</td>
</tr>
<tr class="even">
<td>2</td>
<td>7</td>
<td>6</td>
</tr>
<tr class="odd">
<td>3</td>
<td>4</td>
<td>7</td>
</tr>
<tr class="even">
<td>4</td>
<td>6</td>
<td>9</td>
</tr>
<tr class="odd">
<td>5</td>
<td>5</td>
<td>5</td>
</tr>
<tr class="even">
<td>6</td>
<td>8</td>
<td>7</td>
</tr>
</tbody>
</table>
<ol type="a">
<li><p>Calculate the individual-level treatment effect (<span class="math inline">\(\tau_i\)</span>) for each respondent.</p></li>
<li><p>Calculate the ATE.</p></li>
<li><p>Which respondents experienced a positive treatment effect? A negative treatment effect? No treatment effect?</p></li>
</ol></li>
</ol>
<details>
<summary>
Solution
</summary>
<p><strong>Part a.</strong> To find each individual treatment effect, we compute <span class="math inline">\(\tau_i = Y_i(1) - Y_i(0)\)</span>:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Respondent</th>
<th><span class="math inline">\(Y_i(0)\)</span></th>
<th><span class="math inline">\(Y_i(1)\)</span></th>
<th><span class="math inline">\(\tau_i = Y_i(1) - Y_i(0)\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>5</td>
<td>8</td>
<td><span class="math inline">\(8 - 5 = 3\)</span></td>
</tr>
<tr class="even">
<td>2</td>
<td>7</td>
<td>6</td>
<td><span class="math inline">\(6 - 7 = -1\)</span></td>
</tr>
<tr class="odd">
<td>3</td>
<td>4</td>
<td>7</td>
<td><span class="math inline">\(7 - 4 = 3\)</span></td>
</tr>
<tr class="even">
<td>4</td>
<td>6</td>
<td>9</td>
<td><span class="math inline">\(9 - 6 = 3\)</span></td>
</tr>
<tr class="odd">
<td>5</td>
<td>5</td>
<td>5</td>
<td><span class="math inline">\(5 - 5 = 0\)</span></td>
</tr>
<tr class="even">
<td>6</td>
<td>8</td>
<td>7</td>
<td><span class="math inline">\(7 - 8 = -1\)</span></td>
</tr>
</tbody>
</table>
<p><strong>Part b.</strong> We can compute the ATE by averaging the individual treatment effects:</p>
<p><span class="math display">\[
\begin{align}
\text{ATE} &amp;= \frac{1}{6} \sum_{i=1}^{6} \tau_i \\
&amp;= \frac{1}{6}(3 + (-1) + 3 + 3 + 0 + (-1)) \\
&amp;= \frac{7}{6} \\
&amp;\approx 1.167
\end{align}
\]</span></p>
<p>We can verify this by computing the ATE as the difference between the average potential outcome under treatment and the average potential outcome under control:</p>
<p><span class="math display">\[
\begin{align}
\text{ATE} &amp;= \frac{1}{6}\sum_{i=1}^{6} Y_i(1) - \frac{1}{6}\sum_{i=1}^{6} Y_i(0) \\
&amp;= \frac{1}{6}(8 + 6 + 7 + 9 + 5 + 7) - \frac{1}{6}(5 + 7 + 4 + 6 + 5 + 8) \\
&amp;= \frac{42}{6} - \frac{35}{6} \\
&amp;= 7 - 5.833 \\
&amp;\approx 1.167
\end{align}
\]</span></p>
<p>Both methods give the same answer.</p>
<p><strong>Part c.</strong> Classifying the treatment effects:</p>
<ul>
<li><strong>Positive treatment effect</strong> (<span class="math inline">\(\tau_i &gt; 0\)</span>): Respondents 1, 3, and 4 (with effects of 3, 3, and 3)</li>
<li><strong>Negative treatment effect</strong> (<span class="math inline">\(\tau_i &lt; 0\)</span>): Respondents 2 and 6 (with effects of -1 and -1)</li>
<li><strong>No treatment effect</strong> (<span class="math inline">\(\tau_i = 0\)</span>): Respondent 5</li>
</ul>
</details>
<ol start="6" type="1">
<li><p><strong>Verifying the Sharp Null.</strong> Consider the following potential outcomes:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Respondent</th>
<th><span class="math inline">\(Y_i(0)\)</span></th>
<th><span class="math inline">\(Y_i(1)\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>12</td>
<td>12</td>
</tr>
<tr class="even">
<td>2</td>
<td>8</td>
<td>8</td>
</tr>
<tr class="odd">
<td>3</td>
<td>15</td>
<td>15</td>
</tr>
<tr class="even">
<td>4</td>
<td>10</td>
<td>10</td>
</tr>
</tbody>
</table>
<ol type="a">
<li><p>Does this satisfy the sharp null hypothesis? How do you know?</p></li>
<li><p>Calculate the ATE.</p></li>
<li><p>Under the sharp null hypothesis, what can you always say about the ATE?</p></li>
</ol></li>
</ol>
<details>
<summary>
Solution
</summary>
<p><strong>Part a.</strong> Yes, this satisfies the sharp null hypothesis.</p>
<p>The sharp null hypothesis requires that <span class="math inline">\(Y_i(1) = Y_i(0)\)</span> for <em>all</em> individuals. We can check each respondent:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Respondent</th>
<th><span class="math inline">\(Y_i(0)\)</span></th>
<th><span class="math inline">\(Y_i(1)\)</span></th>
<th><span class="math inline">\(Y_i(1) = Y_i(0)\)</span>?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>12</td>
<td>12</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>2</td>
<td>8</td>
<td>8</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>3</td>
<td>15</td>
<td>15</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>4</td>
<td>10</td>
<td>10</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>For every individual, the potential outcome under treatment equals the potential outcome under control. The sharp null hypothesis holds.</p>
<p><strong>Part b.</strong> Computing the ATE:</p>
<p><span class="math display">\[
\begin{align}
\text{ATE} &amp;= \frac{1}{4}\sum_{i=1}^{4} Y_i(1) - \frac{1}{4}\sum_{i=1}^{4} Y_i(0) \\
&amp;= \frac{1}{4}(12 + 8 + 15 + 10) - \frac{1}{4}(12 + 8 + 15 + 10) \\
&amp;= \frac{45}{4} - \frac{45}{4} \\
&amp;= 11.25 - 11.25 \\
&amp;= 0
\end{align}
\]</span></p>
<p><strong>Part c.</strong> Under the sharp null hypothesis, the ATE is <em>always</em> exactly zero.</p>
<p>This follows directly from the definitions. If <span class="math inline">\(Y_i(1) = Y_i(0)\)</span> for all <span class="math inline">\(i\)</span>, then:</p>
<p><span class="math display">\[\tau_i = Y_i(1) - Y_i(0) = 0 \text{ for all } i\]</span></p>
<p>The ATE is the average of the individual treatment effects:</p>
<p><span class="math display">\[\text{ATE} = \frac{1}{N} \sum_{i=1}^{N} \tau_i = \frac{1}{N} \sum_{i=1}^{N} 0 = 0\]</span></p>
<p>The average of zeros is always zero.</p>
</details>
<ol start="7" type="1">
<li><strong>Constant Treatment Effects.</strong> Create a table of potential outcomes for 5 individuals where the constant treatment effects assumption holds with <span class="math inline">\(\tau = -2.5\)</span> for all individuals. Show that the ATE equals -2.5.</li>
</ol>
<details>
<summary>
Solution
</summary>
<p>The constant treatment effects assumption requires that <span class="math inline">\(\tau_i = \tau\)</span> for all individuals. With <span class="math inline">\(\tau = -2.5\)</span>, we need <span class="math inline">\(Y_i(1) - Y_i(0) = -2.5\)</span> for every individual.</p>
<p>We can choose any values for <span class="math inline">\(Y_i(0)\)</span> and then compute <span class="math inline">\(Y_i(1) = Y_i(0) + (-2.5) = Y_i(0) - 2.5\)</span>:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 16%">
<col style="width: 13%">
<col style="width: 33%">
<col style="width: 37%">
</colgroup>
<thead>
<tr class="header">
<th>Individual</th>
<th><span class="math inline">\(Y_i(0)\)</span></th>
<th><span class="math inline">\(Y_i(1) = Y_i(0) - 2.5\)</span></th>
<th><span class="math inline">\(\tau_i = Y_i(1) - Y_i(0)\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>10</td>
<td>7.5</td>
<td><span class="math inline">\(7.5 - 10 = -2.5\)</span></td>
</tr>
<tr class="even">
<td>2</td>
<td>8</td>
<td>5.5</td>
<td><span class="math inline">\(5.5 - 8 = -2.5\)</span></td>
</tr>
<tr class="odd">
<td>3</td>
<td>12</td>
<td>9.5</td>
<td><span class="math inline">\(9.5 - 12 = -2.5\)</span></td>
</tr>
<tr class="even">
<td>4</td>
<td>6</td>
<td>3.5</td>
<td><span class="math inline">\(3.5 - 6 = -2.5\)</span></td>
</tr>
<tr class="odd">
<td>5</td>
<td>9</td>
<td>6.5</td>
<td><span class="math inline">\(6.5 - 9 = -2.5\)</span></td>
</tr>
</tbody>
</table>
<p>Now we verify that the ATE equals -2.5:</p>
<p><span class="math display">\[
\begin{align}
\text{ATE} &amp;= \frac{1}{5}\sum_{i=1}^{5} Y_i(1) - \frac{1}{5}\sum_{i=1}^{5} Y_i(0) \\
&amp;= \frac{1}{5}(7.5 + 5.5 + 9.5 + 3.5 + 6.5) - \frac{1}{5}(10 + 8 + 12 + 6 + 9) \\
&amp;= \frac{32.5}{5} - \frac{45}{5} \\
&amp;= 6.5 - 9 \\
&amp;= -2.5
\end{align}
\]</span></p>
<p>When treatment effects are constant at <span class="math inline">\(\tau\)</span> for all individuals, the ATE equals <span class="math inline">\(\tau\)</span>. This makes sense: the ATE is the average of the individual treatment effects, and the average of a constant is just that constant.</p>
</details>
</section>
<section id="application-to-rasinskis-experiment" class="level3" data-number="1.7.3">
<h3 data-number="1.7.3" class="anchored" data-anchor-id="application-to-rasinskis-experiment"><span class="header-section-number">1.7.3</span> Application to Rasinski’s Experiment</h3>
<ol start="8" type="1">
<li><p><strong>Understanding the Conditions.</strong></p>
<ol type="a">
<li><p>In Rasinski’s experiment, what exactly differs between the treatment and control conditions? What stays the same?</p></li>
<li><p>Why might the word “welfare” produce different responses than “assistance to the poor” even though both refer to the same government programs?</p></li>
</ol></li>
</ol>
<details>
<summary>
Solution
</summary>
<p><strong>Part a.</strong></p>
<p><em>What differs between the conditions</em>: Only the label used to describe the government programs. The treatment condition uses “assistance to the poor” while the control condition uses “welfare.”</p>
<p><em>What stays the same</em>: Everything else is identical:</p>
<ul>
<li>The question stem: “Are we spending too much, too little, or about the right amount on…”</li>
<li>The response options: Too little, About right, Too much</li>
<li>The numeric coding: 1, 2, 3</li>
<li>The underlying concept being asked about (government spending on programs for low-income people)</li>
</ul>
<p><strong>Part b.</strong> The words “welfare” and “assistance to the poor” may produce different responses because they carry different connotations, even though they refer to the same government programs.</p>
<p>“Welfare” has acquired negative associations in American political discourse. It is often linked to stereotypes about dependency, fraud, or undeserving recipients. Many people have strong negative reactions to the word itself.</p>
<p>“Assistance to the poor” is more neutral and descriptive. It focuses attention on the humanitarian purpose of helping people in need, without triggering the same negative associations.</p>
<p>These different framings can activate different considerations in respondents’ minds, leading them to express different levels of support even though the underlying programs are identical. This is exactly what Rasinski’s experiment was designed to detect.</p>
</details>
<ol start="9" type="1">
<li><p><strong>Interpreting Rasinski’s Results.</strong> In the hypothetical Rasinski data presented in the notes, the ATE was -1.3.</p>
<ol type="a">
<li><p>Explain what this negative ATE means substantively. Does it indicate increased or decreased support for spending?</p></li>
<li><p>Why is the sign (positive or negative) of the ATE potentially confusing in this example?</p></li>
<li><p>If we had instead coded responses as: Too little = 3, About right = 2, Too much = 1, what would the ATE have been? Would your substantive interpretation change?</p></li>
</ol></li>
</ol>
<details>
<summary>
Solution
</summary>
<p><strong>Part a.</strong> The ATE of -1.3 means that, on average, respondents gave responses that were 1.3 points <em>lower</em> on the 1-2-3 scale when asked about “assistance to the poor” compared to when asked about “welfare.”</p>
<p>But what does “lower” mean substantively? Recall the coding:</p>
<ul>
<li>Too little = 1 (more support for spending)</li>
<li>About right = 2</li>
<li>Too much = 3 (less support for spending)</li>
</ul>
<p>Lower numbers indicate <em>more</em> support for spending. So a negative ATE indicates <em>increased</em> support for spending when using the “assistance to the poor” wording. The treatment (changing “welfare” to “assistance to the poor”) made people more supportive of government spending.</p>
<p><strong>Part b.</strong> The sign is potentially confusing because the coding scheme runs in the opposite direction from what we might intuitively expect. We often associate “positive” with “more” and “negative” with “less.” But here, a <em>negative</em> ATE means <em>more</em> support for spending.</p>
<p>This is an artifact of how the response options were numbered. The researcher could have coded the responses differently.</p>
<p><strong>Part c.</strong> If we reversed the coding:</p>
<ul>
<li>Too little = 3 (more support for spending)</li>
<li>About right = 2</li>
<li>Too much = 1 (less support for spending)</li>
</ul>
<p>Then each potential outcome would transform:</p>
<ul>
<li>Original values of 1 become 3</li>
<li>Original values of 2 stay 2</li>
<li>Original values of 3 become 1</li>
</ul>
<p>Using the hypothetical data from the chapter, the new ATE would be:</p>
<p><span class="math display">\[
\begin{align}
\text{ATE} &amp;= \frac{1}{10}(3 + 2 + 3 + 3 + 3 + 2 + 3 + 3 + 2 + 3) - \frac{1}{10}(1 + 1 + 2 + 1 + 2 + 1 + 2 + 1 + 2 + 1) \\
&amp;= \frac{27}{10} - \frac{14}{10} \\
&amp;= 2.7 - 1.4 \\
&amp;= +1.3
\end{align}
\]</span></p>
<p>The ATE becomes <span class="math inline">\(+1.3\)</span> instead of <span class="math inline">\(-1.3\)</span>.</p>
<p>The <em>substantive</em> interpretation does not change: the “assistance to the poor” wording still increases support for spending compared to “welfare.” The sign of the ATE simply reflects our arbitrary choice of how to code the responses.</p>
</details>
<ol start="10" type="1">
<li><p><strong>Rasinski’s Potential Outcomes.</strong> Consider respondent 9 in the hypothetical Rasinski data, who answered “About right” (2) under both conditions.</p>
<ol type="a">
<li><p>What is this respondent’s individual treatment effect (<span class="math inline">\(\tau_9\)</span>)?</p></li>
<li><p>Does this mean the question wording had no effect on this respondent? Explain.</p></li>
<li><p>Can you construct an example with different potential outcomes where the treatment has a large effect for every individual, but the ATE is still zero?</p></li>
</ol></li>
</ol>
<details>
<summary>
Solution
</summary>
<p><strong>Part a.</strong> Respondent 9 answered “About right” (coded as 2) under both conditions:</p>
<ul>
<li><span class="math inline">\(Y_9(1) = 2\)</span> (response if asked about “assistance to the poor”)</li>
<li><span class="math inline">\(Y_9(0) = 2\)</span> (response if asked about “welfare”)</li>
</ul>
<p>The individual treatment effect is:</p>
<p><span class="math display">\[\tau_9 = Y_9(1) - Y_9(0) = 2 - 2 = 0\]</span></p>
<p><strong>Part b.</strong> For this particular respondent, the question wording had no effect on their <em>observed categorical response</em>. They gave the same answer—“About right”—regardless of which version of the question they received.</p>
<p>However, this does not necessarily mean the wording had no psychological effect whatsoever. It could be that:</p>
<ul>
<li>The respondent holds consistent, moderate views on this issue that are not affected by framing</li>
<li>The two framings activated different considerations, but those considerations happened to produce the same response category</li>
<li>The respondent gave a default “middle” response without processing the question carefully</li>
</ul>
<p>All we can conclude is that the treatment did not change this respondent’s response on this particular three-category scale.</p>
<p><strong>Part c.</strong> Yes. Here is an example where treatment has a large effect (<span class="math inline">\(|\tau_i| = 3\)</span>) for every individual, but the ATE is zero:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Individual</th>
<th><span class="math inline">\(Y_i(0)\)</span></th>
<th><span class="math inline">\(Y_i(1)\)</span></th>
<th><span class="math inline">\(\tau_i\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>2</td>
<td>5</td>
<td><span class="math inline">\(5 - 2 = 3\)</span></td>
</tr>
<tr class="even">
<td>2</td>
<td>6</td>
<td>3</td>
<td><span class="math inline">\(3 - 6 = -3\)</span></td>
</tr>
<tr class="odd">
<td>3</td>
<td>4</td>
<td>7</td>
<td><span class="math inline">\(7 - 4 = 3\)</span></td>
</tr>
<tr class="even">
<td>4</td>
<td>8</td>
<td>5</td>
<td><span class="math inline">\(5 - 8 = -3\)</span></td>
</tr>
</tbody>
</table>
<p>Every individual experiences a treatment effect of either <span class="math inline">\(+3\)</span> or <span class="math inline">\(-3\)</span>. The treatment clearly matters for each person. But the ATE is:</p>
<p><span class="math display">\[
\begin{align}
\text{ATE} &amp;= \frac{1}{4}(3 + (-3) + 3 + (-3)) \\
&amp;= \frac{0}{4} \\
&amp;= 0
\end{align}
\]</span></p>
<p>The positive and negative effects cancel perfectly, producing an ATE of zero despite large individual effects.</p>
</details>
</section>
<section id="critical-thinking" class="level3" data-number="1.7.4">
<h3 data-number="1.7.4" class="anchored" data-anchor-id="critical-thinking"><span class="header-section-number">1.7.4</span> Critical Thinking</h3>
<ol start="11" type="1">
<li><p><strong>Beyond the Average.</strong> In the original hypothetical example (with 10 respondents and ATE = 1.5), we saw that treatment effects varied across individuals, with some positive, some negative, and some zero.</p>
<ol type="a">
<li><p>Why might this variation in individual treatment effects matter for policy or practical decisions?</p></li>
<li><p>What are the limitations of focusing only on the ATE when individual treatment effects vary substantially?</p></li>
</ol></li>
</ol>
<details>
<summary>
Solution
</summary>
<p><strong>Part a.</strong> Variation in individual treatment effects matters for policy and practical decisions because:</p>
<p><em>Targeting interventions</em>: If treatment helps some people but harms others, we might want to identify who benefits and offer the treatment only to them. A positive ATE could mask the fact that a substantial group is being harmed.</p>
<p><em>Equity concerns</em>: Even if the average effect is positive, we might care about <em>who</em> benefits. If benefits are concentrated among people who are already well-off, while disadvantaged groups see little improvement, this raises fairness concerns that the ATE alone cannot reveal.</p>
<p><em>Individual decision-making</em>: A person deciding whether to undergo a treatment cares about the effect on <em>them</em>, not the average effect across all people. If effects are highly variable, the ATE may be a poor guide for any particular individual.</p>
<p><em>Understanding mechanisms</em>: Variation in effects can help us understand <em>why</em> a treatment works. If effects are larger for certain subgroups, this may point to underlying mechanisms or suggest how to improve the treatment.</p>
<p><strong>Part b.</strong> The ATE has several limitations when individual treatment effects vary substantially:</p>
<ul>
<li><p>The ATE can hide important heterogeneity. An ATE of zero could mean “the treatment has no effect on anyone” or “the treatment has large positive effects for half the population and large negative effects for the other half.” These are very different situations with very different policy implications.</p></li>
<li><p>The ATE does not tell us who benefits and who is harmed.</p></li>
<li><p>The ATE treats all individuals equally. But we might care more about effects on certain groups, such as those who are most disadvantaged or most at risk.</p></li>
<li><p>The ATE is a single summary number. Like any average, it can be misleading if the underlying distribution is skewed or bimodal.</p></li>
<li><p>For individual decision-making, knowing the ATE does not tell any specific person whether the treatment will help or harm <em>them</em>.</p></li>
</ul>
</details>
<ol start="12" type="1">
<li><p><strong>Assumption Plausibility.</strong></p>
<ol type="a">
<li><p>For what kinds of treatments or contexts—if any—might the constant treatment effects assumption be approximately reasonable?</p></li>
<li><p>For what kinds of treatments would this assumption be clearly implausible? Provide a specific example and explain why treatment effects would likely vary across individuals.</p></li>
</ol></li>
</ol>
<details>
<summary>
Solution
</summary>
<p><strong>Part a.</strong> The constant treatment effects assumption might be <em>approximately</em> reasonable in some contexts:</p>
<p><em>Simple, additive interventions</em>: A treatment that mechanically adds a fixed amount might have roughly constant effects. For example, if a government program gives every recipient exactly $500, the effect on “dollars received” is constant at $500 for everyone.</p>
<p><em>Highly standardized settings with homogeneous units</em>: In carefully controlled laboratory experiments with nearly identical subjects (such as certain agricultural experiments with genetically identical plants), treatment effects might be relatively uniform.</p>
<p><em>Very small effects</em>: When treatment effects are small relative to natural variation in outcomes, the assumption of constant effects might not matter much practically, even if it’s technically false.</p>
<p>Even in these cases, truly constant effects are unlikely. But the assumption might be close enough to be useful for certain purposes.</p>
<p><strong>Part b.</strong> Constant treatment effects would be clearly implausible for treatments where individual circumstances strongly influence how people respond.</p>
<p><em>Example: A job training program’s effect on earnings</em></p>
<p>Treatment effects would likely vary substantially across individuals because:</p>
<ul>
<li><p><em>Baseline skills</em>: Someone with no prior job skills might benefit enormously from training, while someone who already has strong skills might gain little or nothing.</p></li>
<li><p><em>Local labor markets</em>: The value of new skills depends on whether employers in the person’s area are hiring for jobs that use those skills. A person in a booming job market might see large earnings gains; a person in a depressed area might see none.</p></li>
<li><p><em>Personal circumstances</em>: People differ in their ability to apply what they learn, their job search networks, the discrimination they face, their health, their family responsibilities, and countless other factors that affect how training translates into earnings.</p></li>
<li><p><em>Motivation and engagement</em>: Some participants engage deeply with training while others do not, leading to different outcomes.</p></li>
</ul>
<p>For a job training program, we would expect some participants to see large earnings gains, others to see modest gains, and some to see no gain or even losses (if, say, the time spent in training caused them to miss other opportunities). Assuming constant effects would ignore this important variation.</p>
</details>



</section>
</section>


</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../index.html" class="pagination-link" aria-label="Introduction">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Introduction</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../ch/ate-hat.html" class="pagination-link" aria-label="Estimating the ATE">
        <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Estimating the ATE</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>